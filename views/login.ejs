<%- include('partials/header') %>

  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="login-box bg-light rounded p-4 shadow">


          <div class="text-center mb-4">
            <h2>Log In</h2>
          </div>
          <% if (error) { %>
            <div class="alert alert-danger" role="alert">Invalid username or password'</div>
            <% } %>
              <form action="/login" method="POST">

                <div class="form-floating mb-3">

                  <input type="email" type="text" class="form-control" id="username" name="username"
                    placeholder="Enter your username" required pattern="/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,})+$/" />
                  <label for="password">Email</label>
                </div>

                <div class="form-floating mb-3">
                  <input type="password" class="form-control form-control-lg" id="password" name="password"
                    placeholder="Enter your password" required
                    pattern="/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/" />
                  <label for="password">Password</label>
                  <i onclick="togglePassword()" class="fa fa-eye"></i>
                </div>


                <button type="submit" class="btn btn-primary btn-block">Log in</button>
              </form>
              <p class="text-center mt-3">
                Don't have an account? <a href="signup">Sign up here</a>
              </p>

        </div>
      </div>
    </div>
  </div>
  <script>
    function togglePassword() {
      const passwordInput = document.getElementById("password");
      const toggleButton = document.querySelector("i");

      if (passwordInput.type === "password") {
        passwordInput.type = "text";
        toggleButton.classList.remove("fa-eye");
        toggleButton.classList.add("fa-eye-slash");
      } else {
        passwordInput.type = "password";
        toggleButton.classList.remove("fa-eye-slash");
        toggleButton.classList.add("fa-eye");
      }
    }
  </script>
  <style>
    .form-floating i {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      cursor: pointer;
    }
  </style>

  <%- include('partials/footer') %>
